                         T-Watch 96                           V 2.53, 31. März 1996 © 1996 Moritz BorgmannKommentare, Fragen und Bug-Reports bitte anMoritz_Borgmann@magicvillage.deFür alle Anregungen bin ich dankbar!Dieses Programm ist KEINE FREEWARE, sondern Shareware. Sie können das Programm kostenlos testen, sobald Sie es aber tatsächlich benutzen, müssen Sie die Shareware-Gebühr von 10 DM entrichten. Sie werden dafür registriert und über Updates informiert. Diese Ausgabe rentiert sich aber schnell, weil Sie durch den Einsatz von T-Watch die Online-Zeit effizienter nutzen können und so tatsächlich Geld sparen. LASSEN SIE SICH REGISTRIEREN!Einfach 10 DM in einen undurchsichtigen Umschlag stecken und (bitte mit email-Adresse) an die folgende Adresse schicken. Bitte schreiben Sie auch, woher Sie T-Watch haben.Moritz BorgmannWilhelms Allee 122587 HamburgT-Watch 96 darf frei weitergegeben werden, aber nur inklusive aller dazugehörigen Dateien und ReadMe's. Jede kommerzielle Nutzung ohne ausdrückliche Genehmigung des Autors ist untersagt.0. Inhaltsverzeichnis1.	Wofür dieses Programm?2.	Bedienung2.1.	automatische Bedienung2.2.	manuelle Bedienung3.	TCP/IP-Verbindungen4.	Einstellungen4.1	Darstellung4.2	Verbindungserkennung4.3	Töne4.4	Log-Datei5.	AppleEvents6.	Dank7.	Revision history1. Wofür dieses Programm?Ich habe dieses Programm geschrieben, weil ich bei meinen Telefonaten und Modem-Verbindungen im neuen Jahr eigentlich nie wußte, wieviel der Spaß nun kostet. All diejenigen, die keinen Gebührenimpuls von der Telekom geschaltet haben, können sich mit T-Watch 96 leicht einen Überblick über die verbrauchten Gebühren verschaffen.Wenn Sie das T-Watch Kontrolleistenmodul einsetzen, dann brauchen Sie das T-Watch Programm eigentlich nur noch, um Einstellungen vorzunehmen. Das Kontrolleistenmodul hat ansonsten die gleiche Funktionalität wie das Programm.2. Bedienung2.1 automatische BedienungWenn Automatisches Erkennen von PPP/SLIP-Verbindungen eingeschaltet ist (siehe dazu unter "Einstellungen") und man eine PPP/SLIP-Verbindung aufbaut, muß man nur noch1. Tarif wählenMan wählt entweder im großen Fenster oder im "Tarifbereiche"-Menü aus, in welche Tarifregion man gerade telefonieren will. Wenn man nicht genau weiß, in welcher Tarifregion der Ort liegt, kann man unter "Wo ist das?" eine Liste der Regionen aufrufen. Samstage und Sonntage werden automatisch als "Feiertage" im Sinne der Telekom erkannt, an allen anderen Feiertagen muß man manuell "Feiertag" anklicken. Abhängig von der Uhrzeit wird dann immer der richtige Tarif ermittelt.2. Mit der jeweiligen Software (Browser/FTP-Program/ConfigPPP/InterSLIP etc.) die Verbindung starten.Die automatische Verbindungserkennung funktioniert nur für PPP- und SLIP- Verbindungen. Zur Zeit unterstützt T-Watch 96 MacPPP, FreePPP, InterSLIP und MacSLIP. Um die Genauigkeit der Zeitmessung zu verbessern, kann man im "Einstellungen"-Fenster eine Zeit angeben, die automatisch zu jeder automatischen Verbindung dazuaddiert wird, denn T-Watch startet den Zählvorgang erst, wenn die Verbindung steht, und noch nicht, wenn das Modem abnimmt. Diese Zeit hängt von der verwendeten Software und dem Provider ab, ist also individuell zu ermitteln.2.2 manuelle Bedienung1. Tarif wählenMan wählt entweder im großen Fenster oder im "Tarifbereiche"-Menü aus, in welche Tarifregion man gerade telefonieren will. Wenn man nicht genau weiß, in welcher Tarifregion der Ort liegt, kann man unter "Wo ist das?" eine Liste der Regionen aufrufen. Samstage und Sonntage werden automatisch als "Feiertage" im Sinne der Telekom erkannt, an allen anderen Feiertagen muß man manuell "Feiertag" anklicken. Abhängig von der Uhrzeit wird dann immer der richtige Tarif ermittelt.2. "Verbindung aufgebaut" anklicken, gleichzeitig erscheint ein kleiner roter blinkender Punkt, der einen daran erinnert, wieder auf3. "Verbindung beendet" zu klicken. Der 3. Punkt wird überflüssig, wenn Sie die automatische Verbindungsende-Erkennung eingeschaltet haben.Sie können auch noch während einer laufenden Zählung den Tarif ändern, es werden dann die Kosten der Verbindung von Anfang an neu berechnet.Mit "Konto zurücksetzen" wird der Zähler unter "Kosten gesamt" auf 0 DM zurückgesetzt. Dies kann man z.B. immer am Monatsanfang tun.Klicken Sie in das Erweiterungsfeld,                                        um eine verkleinerte Version des Fensters ohne die Tarife zu erzeugen (platzsparend).Die Einstellungen und die verbrauchten Gebühren werden in der Datei "T-Watch Voreinstellungen" im Preferences-Ordner abgespeichert.Es kann sinnvoll sein, T-Watch 96 in den "Startobjekte"-Ordner im Systemordner zu legen, um es nach jedem Neustart sofort verfügbar zu haben.3. TCP/IP-VerbindungenVerbindungen mit SLIP oder PPP können jetzt direkt aus T-Watch durch Wahl des entsprechenden Punktes im "TCP/IP"-Menü gestartet werden. Dieses Menü ist nur sichtbar, wenn Sie entsprechende Software installiert haben.4. EinstellungenDie verschiedenen Einstellungen können Sie im "Einstellungen"-Fenster vornehmen (erreichbar entweder durch die Taste "Einstellungen..." oder das "Bearbeiten"-Menü).Dort gibt es vier Abteilungen:4.1 DarstellungWenn Sie wollen, daß die Gebühren in der Menüzeile angezeigt werden, schalten Sie "Gebühren in der Menüleiste" an. Die Position der Darstellung in der Menüleiste können Sie festlegen, indem Sie die Anzeige der Gebühren in der kleinen Menüleiste, die dort abgebildet ist, mit der Maus verschieben. Zeichensatz und Größe wählen Sie aus den Popup-Menüs. Wenn Sie nur wenig Platz in der Menüleiste haben, können Sie optional auch die "DM" nach der Gebührenanzeige in der Menüleiste weglassen.4.2 VerbindungserkennungWenn Sie entsprechende Software installiert haben, können PPP/SLIP-Verbindungen automatisch erkannt werden. Schalten Sie dazu unter "PPP" oder "SLIP" an, je nachdem, welche Software Sie benutzen. Wenn Sie keine kompatible Software installiert haben, ist die jeweilige Option nicht anwählbar. Zur Zeit unterstützt T-Watch 96 MacPPP, FreePPP, InterSLIP und MacSLIP. Sie können außerdem eine Zeit angeben, die automatisch zu jeder automatischen Verbindung dazuaddiert wird, denn T-Watch startet den Zählvorgang erst, wenn die Verbindung steht, und noch nicht, wenn das Modem abnimmt. Diese Zeit hängt von der verwendeten Software und dem Provider ab, ist also individuell zu ermitteln.Wenn Sie "automatische Verbindungsende-Erkennung" einschalten, dann beendet T-Watch die Zählung automatisch, wenn nach einer Phase von Aktivität auf der seriellen Schnittstelle (Modem-Port) der serielle Treiber wieder freigegeben wird. Dies macht es bei den meisten Verbindungen unnötig, die Zählung nach beendeter Verbindung manuell zu beenden. Wichtig: Diese Option arbeitet nicht bei allen Kommunikationsprogrammen zuverlässig. Insbesondere bei der Arbeit mit Terminalprogrammen wie z.B. ZTerm wird das Auflegen nicht richtig erkannt, da der serielle Treiber auch nach dem Auflegen noch weiter belegt wird und erst bei Beenden des Programms geschlossen wird. Die meisten Kommunikationsprogramme wie z.B. FirstClass schließen aber sofort nach dem Auflegen den Treiber.Von vielen Benutzern wurde außerdem eine automatische Erkennung des Verbindungsbeginns gefordert. Solch eine Funktion ist aber auf dem Mac technisch nicht zu realisieren.4.3 TöneHier läßt sich mit "Gebührenimpuls" einstellen, daß T-Watch bei jeder neuen Einheit piepst, auch aus dem Hintergrund heraus. Wenn "Warnung" angeschaltet ist, fängt das Programm schon ca. 20 s vorher an zu piepsen, damit man noch Zeit hat, rechtzeitig aufzulegen. Mit dem Regler können Sie die Lautstärke der Töne einstellen.4.4 Log-DateiWenn Sie wollen, daß alle Ihre Verbindungen mitprotokolliert werden, schalten Sie "Log in Datei" an. Sie müssen dann auch noch unter "Log-Datei festlegen" eine neue Datei auswählen. Wenn Sie eine schon bestehende Datei wählen, hängt T-Watch die neuen Daten hinten an. Sie können die Daten in zwei verschiedenen Formaten speichern lassen, und zwar als Tabelle, die in einem unproportionalen Zeichensatz wie Courier oder Monaco am besten aussieht, oder als Tab-Text. Dies ist ein gebräuchliches Format, das bequem in Tabellenkalkulationen und Datenbanken zur Weiterverarbeitung importiert werden kann.5. AppleEventsT-Watch 96 ist jetzt AppleEvent-fähig. Außer der required suite werden acht Events unterstützt, und zwarisConnected anythingisDeconnected anythingclearAccountsetTarif  small integerstartPPPstopPPPstartSLIPstopSLIPDiese Events haben genau die gleiche Wirkung wie das Anklicken der/des jeweiligen Taste/Menüpunktes im Programm. Bei isConnected und isDeconnected kann als Parameter ein Text angegeben werden, der dann in die Log-Datei mit aufgenommen wird. Bei setTarif muß der Tarif als Nummer angegeben werden, beginnend mit 1 für City.In der Datei "TW Beispielscript" sind verschiedene Beispiele für die Verwendung von AppleEvents gegeben.Für Filemaker-Anwender hier noch die ID's der verschiedenen Events:  kTWatchSuite          	'TWSu'  kAEIsConnected		     'conn'   kAEIsDeconnected		 'decn'   kAEClearAccount		   'clAc'  kAESetTarif              'setT'	kAEStartPPP             'oPPP'	kAEStopPPP              'cPPP'	kAEStartSLIP            'oSLI'	kAEStopSLIP              'cSLI'6. DankIch möchte mich bei all denen bedanken, die mit ihren tollen Anregungen dazu beigetragen haben, daß T-Watch noch besser geworden ist. Ohne die vielen Ideen wäre ich nie so weit gekommen. Ich habe bloß von so vielen Post bekommen, daß es leider unmöglich ist, hier alle namentlich aufzuführen.Besonderer Dank geht allerdings an Steve Dagley und Eric Presto, die ausgezeichneten Programmier-Support lieferten, und an Richard Buckle für neue PPP-Routinen. Olav Brinkmann hatte T-Watch schon früh unterstützt, indem er für die Version 2.0 einen Patch für die MacSLIP-Unterstützung geschrieben hatte. Er hat mir die Routinen zur Verfügung gestellt, so daß die MacSLIP-Unterstützung jetzt "serienmäßig" eingebaut ist, auch dafür vielen Dank!7. Revision historyV1.1 non-Release13.1.96	V1.11 RELEASE•	Daten werden in Prefs-File gespeichert•	Feiertage werden richtig erkannt14.1.96	V1.12 RELEASE•	Window kann gezoomt werden•	"Verbindung seit" bleibt auch nach Ende der Verbindung weiterhin stehen•	roter Punkt•	snd-Resourcen gelockt->kein Krachen mehr bei erstem Abspielen15.1.96	V1.12-a•	T-Watch ist AppleEvent-fähig16.1.96	V1.13 PRE-RELEASE•	Warnung-Ton wird langsam lauter, fängt schon zwanzig Sekunden vorher an•	Fenster wird noch weiter gezoomt•	Zeit bis zur nächsten Einheit wird angezeigt17.1.96	V1.13 PRE-RELEASE•	Zwei verschiedene Dialogboxen für gezoomt / nicht gezoomt18.1.96	V1.13b1•	Subversives Logo entschärft :-)•	Fenster-Update wird bei Tarifsprung korrekt ausgeführt19.1.96	V1.13b2•	Tarif kann per AppleEvent verändert werden22.1.96 V1.13b3 PRE-RELEASE•	PPP Auto-Detect, incl. Prefs-Dialog•	Fenstergröße wird gespeichert23.1.96	V1.13b4 PRE-RELEASE•	Bug beseitigt: Manueller Verbindungsaufbau war nach Auto-Detect nicht mehr möglich25.1.96	V1.13b5 PRE-RELEASE•	Gebühren werden in Menüleiste angezeigt•	Neuer Einstellungen-Dialog26.1.96•	Darstellung beschleunigt28.1.96	V1.13b6 PRE-RELEASE•	Mobilfunk-Tarife hinzugefügt•	Standardtarif bei Euro 1 wurde nicht erkannt•	Auch nicht ganze Taktzeiten werden berücksichtigt•	kleines Fenster ist noch kleiner geworden•  Gebühren werden jedes Mal nach Ende der Verbindung gespeichert, um bei Abstürzen nicht alle Daten zu verlieren•	Verstellen der Systemzeit während der Zählung kann die Zählung nicht mehr verfälschen31.1.96	V1.13b7 PRE-RELEASE•	Darstellung wesentlich beschleunigt•	Nach Zurücksetzen der Gebühren wird alles auf Null gesetzt•	Menütext ist Aaron-kompatibel•	Font und Größe des Menütextes ist einstellbar2.2.96	V1.13b8 PRE-RELEASE•	Bug in Darstellung der Gebühren in Menüleiste beseitigt•	SLIP-AutoDetect eingebaut•	WindowPositions werden im Prefs-File gespeichert12.2.96	V2.0	RELEASE•	Bug beseitigt in D1/D2-Tarifen an Feiertagen•	In kleinem Fenster noch Tarifregion hinzugefügt17.2.96 V2.1b1 PRE-RELEASE•	Neuer Prefs-Dialog•	Log-Datei wird geführt•	PPP/SLIP-Start und Stopp im Menü•	Tarifbereiche im Menü•	gewählter Tarifbereich wird in Voreinstellungen gespeichert•	Lautstärkeregler eingebaut•	T-Watch HotKeys hinzugefügt25.2.96  V2.1b2 PRE-RELEASE•	TW meldet Speichermangel, anstatt abzustürzen•	Neue openPPP-Funktionen, FreePPP-kompatibel26.2.96	 V2.1b2 PRE-RELEASE•	Balken wurde bei "DM weglassen" zu lang angezeigt - Problem beseitigt.4.3.96		V2.1b3 PRE-RELEASE•	Problem mit schwarzer Anzeige der Gebühren in Menüleiste beseitigt•	Zusammenarbeit mit Kontrolleistenmodul•	Kommentar in Log-Datei bei Start mit AppleEvent•	Automatische Verbindungsende-Erkennung11.3.96	V2.1b4•	PPP/SLIP-Zählung läßt sich nun auch manuell beenden•	Kommentar für Log-Datei kann bis zu 60 Zeichen haben, bei Überschreitung wird kein Speichermüll mehr angezeigt•	Bug beseitigt, der TW ohne das Kontrolleistenmodul zum Absturz brachte18.3.96 V2.5 RELEASE•	TelekomWatch in T-Watch umbenannt, neue Logos & About-Box•	Im Tab-Text Protokoll wird bei den Kosten das "DM" nicht mitgeschrieben25.3.96	V2.51 RELEASE•	Bei den Tasten für die zu addierende Zeit kann man auch die Taste gedrückt halten, um die Zeit zu verändern•	Die Anzeige in der Menüleiste ist rechtsbündig•	Darstellung nochmals erheblich beschleunigt•	Tarifänderung auch während des Gespräches möglich•	TCP-Erkennung funktioniert wieder ohne daß der Zähler durchrattert•	MacSLIP-Unterstützung eingebaut31.3.96	V2.52•	Problem beseitigt, das unter gewissen Umständen die Auswahl der Log-Datei unmöglich machte31.3.96	V2.53•	Bug beseitigt, der das manuelle Verstellen des Feiertags-Status unmöglich machte